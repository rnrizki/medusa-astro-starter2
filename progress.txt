
## 2026-01-20 - Feature 41: Total JavaScript bundle under 50KB gzipped

**Status:** Complete

**Work done:**
- Analyzed initial bundle size: ~76KB gzipped (React + Medusa SDK).
- Migrated from React to Preact to reduce bundle size.
- Replaced `@astrojs/react` with `@astrojs/preact`.
- Replaced `@nanostores/react` with `@nanostores/preact`.
- Updated `astro.config.mjs` to use `preact({ compat: true })`.
- Updated `tsconfig.json` to alias `react` and `react-dom` to `preact/compat`.
- Updated component imports to use `preact/hooks` and `@nanostores/preact`.
- Verified new bundle size: ~38.6KB gzipped (< 50KB target).
- Verified linting passes.
- Updated PRD to reflect Tech Stack change (React -> Preact).
- Also marked Features 1, 2, 3 (Monorepo), 26, 27 (Cart update), 44 (CLS), 63 (Build), 65 (E2E) as passed in PRD.

**Verification:**
- `pnpm --filter storefront build` - Success.
- Bundle size analysis: Total ~39KB.
- `pnpm run lint` - Success.

**Notes for next person:**
- Feature 41 (Performance optimization) is complete. The stack now uses Preact.
- Feature 30 (Checkout page) is HIGH priority and the next logical step. It is currently missing.
- Feature 31 & 32 (Checkout forms) follow Feature 30.
- Feature 18 (Multiple variants) is still pending.
- Feature 12 (Footer) is pending.
- The `.env` file still has dummy keys.
